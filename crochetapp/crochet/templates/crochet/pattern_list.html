{% extends "crochet/base.html" %}
{% block title %}Patterns — CrochetApp{% endblock %}

{% block content %}
<div class="row">
  <div class="col-12">
    <div class="card-glass mb-4">
      <div class="d-flex justify-content-between align-items-center">
        <h1 class="h4 mb-0">Patterns</h1>
        <a href="{% url 'pattern_create' %}" class="btn btn-sm btn-success">New Pattern</a>
      </div>
      <p class="muted mt-2">Browse patterns, materials, stitches and comments.</p>
    </div>
  </div>
</div>

<div class="row g-4">
  {% for pattern in patterns %}
  <div class="col-12 col-md-6 col-lg-4">
    <div class="card-glass h-100">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <div class="pattern-title">{{ pattern.title }}</div>
          <div class="muted small">by {{ pattern.user.username }} • {{ pattern.created_at|date:"M j, Y" }}</div>
        </div>
        <div class="text-end">
          <div class="badge bg-secondary">{{ pattern.difficulty_level }}</div>
        </div>
      </div>

      <p class="mt-3 mb-1" style="min-height:48px;">{{ pattern.description|truncatechars:120 }}</p>

      <div class="d-flex justify-content-between align-items-center mt-3">
        <a href="{% url 'pattern_detail' pattern.id %}" class="btn btn-sm btn-outline-primary">Open</a>
        <small class="muted">{{ pattern.comments.count }} comments</small>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <div class="card-glass">
      <p>No patterns yet. <a href="{% url 'pattern_create' %}">Create one</a>.</p>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
